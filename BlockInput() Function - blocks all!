; BLOCKINPUT FUNCTION.
;EXAMPLE
SetTimer, d, 100

BlockInput(1)
Sleep, 10000
BlockInput(0)

ExitApp

;PROGRESS
d:
d++
ToolTip, %d%`%
return

;CLOSE SCRIPT
~Esc::ExitApp







;FUNCTION
BlockInput(BlockInput_FunctionState) {
	BlockInput, % BlockInput_FunctionState = 1 ? "On" : BlockInput_FunctionState = 0 ? "Off" : BlockInput_FunctionState
	
	if (InStr(BlockInput_FunctionState, "On")) OR (InStr(BlockInput_FunctionState, "1")) {
		Regwrite, REG_SZ, HKEY_LOCAL_MACHINE,SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\taskmgr.exe, Debugger, Hotkey Disabled
		SetTimer, BlockInput_FunctionState, 10
	} else if (InStr(BlockInput_FunctionState, "Off")) OR (InStr(BlockInput_FunctionState, "0")) {
		RegDelete,HKEY_LOCAL_MACHINE,SOFTWARE\Microsoft\Windows NT\CurrentVersion\Image File Execution Options\taskmgr.exe
		SetTimer, BlockInput_FunctionState, Off
		BlockInput_FunctionState=
	}
	return ErrorLevel ? 0 : 1
}

BlockInput_FunctionState:
BlockInput, On
Process, Close, taskmgr.exe
WinClose, ahk_class DV2ControlHost
return
